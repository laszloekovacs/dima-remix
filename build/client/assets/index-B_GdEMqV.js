import{a as d}from"./chunk-UIGDSWPH-BRFJvEw1.js";const H=["shift","alt","meta","mod","ctrl","control"],Q={esc:"escape",return:"enter",left:"arrowleft",right:"arrowright",up:"arrowup",down:"arrowdown",ShiftLeft:"shift",ShiftRight:"shift",AltLeft:"alt",AltRight:"alt",MetaLeft:"meta",MetaRight:"meta",OSLeft:"meta",OSRight:"meta",ControlLeft:"ctrl",ControlRight:"ctrl"};function g(t){return(Q[t.trim()]||t.trim()).toLowerCase().replace(/key|digit|numpad/,"")}function M(t){return H.includes(t)}function K(t,n=","){return t.toLowerCase().split(n)}function S(t,n="+",o=">",c=!1,a){let s=[],r=!1;t=t.trim(),t.includes(o)?(r=!0,s=t.toLocaleLowerCase().split(o).map(f=>g(f))):s=t.toLocaleLowerCase().split(n).map(f=>g(f));const v={alt:s.includes("alt"),ctrl:s.includes("ctrl")||s.includes("control"),shift:s.includes("shift"),meta:s.includes("meta"),mod:s.includes("mod"),useKey:c},u=s.filter(f=>!H.includes(f));return{...v,keys:u,description:a,isSequence:r,hotkey:t}}typeof document<"u"&&(document.addEventListener("keydown",t=>{t.code!==void 0&&$([g(t.code)])}),document.addEventListener("keyup",t=>{t.code!==void 0&&I([g(t.code)])})),typeof window<"u"&&(window.addEventListener("blur",()=>{w.clear()}),window.addEventListener("contextmenu",()=>{setTimeout(()=>{w.clear()},0)}));const w=new Set;function A(t){return Array.isArray(t)}function U(t,n=","){return(A(t)?t:t.split(n)).every(o=>w.has(o.trim().toLowerCase()))}function $(t){const n=Array.isArray(t)?t:[t];w.has("meta")&&w.forEach(o=>!M(o)&&w.delete(o.toLowerCase())),n.forEach(o=>w.add(o.toLowerCase()))}function I(t){const n=Array.isArray(t)?t:[t];t==="meta"?w.clear():n.forEach(o=>w.delete(o.toLowerCase()))}function V(t,n,o){(typeof o=="function"&&o(t,n)||o===!0)&&t.preventDefault()}function X(t,n,o){return typeof o=="function"?o(t,n):o===!0||o===void 0}const Y=["input","textarea","select","searchbox","slider","spinbutton","menuitem","menuitemcheckbox","menuitemradio","option","radio","textbox"];function Z(t){return W(t,Y)}function W(t,n=!1){const{target:o,composed:c}=t;let a,s;return _(o)&&c?(a=t.composedPath()[0]&&t.composedPath()[0].tagName,s=t.composedPath()[0]&&t.composedPath()[0].role):(a=o&&o.tagName,s=o&&o.role),A(n)?!!(a&&n&&n.some(r=>r.toLowerCase()===a.toLowerCase()||r===s)):!!(a&&n&&n)}function _(t){return!!t.tagName&&!t.tagName.startsWith("-")&&t.tagName.includes("-")}function z(t,n){return t.length===0&&n?(console.warn('A hotkey has the "scopes" option set, however no active scopes were found. If you want to use the global scopes feature, you need to wrap your app in a <HotkeysProvider>'),!0):n?t.some(o=>n.includes(o))||t.includes("*"):!0}const J=(t,n,o=!1)=>{const{alt:c,meta:a,mod:s,shift:r,ctrl:v,keys:u,useKey:f}=n,{code:L,key:e,ctrlKey:E,metaKey:k,shiftKey:y,altKey:m}=t,l=g(L);if(f&&(u==null?void 0:u.length)===1&&u.includes(e))return!0;if(!(u!=null&&u.includes(l))&&!["ctrl","control","unknown","meta","alt","shift","os"].includes(l))return!1;if(!o){if(c!==m&&l!=="alt"||r!==y&&l!=="shift")return!1;if(s){if(!k&&!E)return!1}else if(a!==k&&l!=="meta"&&l!=="os"||v!==E&&l!=="ctrl"&&l!=="control")return!1}return u&&u.length===1&&u.includes(l)?!0:u?U(u):!u},B=d.createContext(void 0),ee=()=>d.useContext(B);function F(t,n){return t&&n&&typeof t=="object"&&typeof n=="object"?Object.keys(t).length===Object.keys(n).length&&Object.keys(t).reduce((o,c)=>o&&F(t[c],n[c]),!0):t===n}const te=d.createContext({hotkeys:[],activeScopes:[],toggleScope:()=>{},enableScope:()=>{},disableScope:()=>{}}),ne=()=>d.useContext(te);function oe(t){const n=d.useRef(void 0);return F(n.current,t)||(n.current=t),n.current}const D=t=>{t.stopPropagation(),t.preventDefault(),t.stopImmediatePropagation()},re=typeof window<"u"?d.useLayoutEffect:d.useEffect;function se(t,n,o,c){const a=d.useRef(null),s=d.useRef(!1),r=Array.isArray(o)?Array.isArray(c)?void 0:c:o,v=A(t)?t.join(r==null?void 0:r.delimiter):t,u=Array.isArray(o)?o:Array.isArray(c)?c:void 0,f=d.useCallback(n,u??[]),L=d.useRef(f);u?L.current=f:L.current=n;const e=oe(r),{activeScopes:E}=ne(),k=ee();return re(()=>{if((e==null?void 0:e.enabled)===!1||!z(E,e==null?void 0:e.scopes))return;let y=[],m;const l=(i,R=!1)=>{var q;if(!(Z(i)&&!W(i,e==null?void 0:e.enableOnFormTags))){if(a.current!==null){const h=a.current.getRootNode();if((h instanceof Document||h instanceof ShadowRoot)&&h.activeElement!==a.current&&!a.current.contains(h.activeElement)){D(i);return}}(q=i.target)!=null&&q.isContentEditable&&!(e!=null&&e.enableOnContentEditable)||K(v,e==null?void 0:e.delimiter).forEach(h=>{var P,j,N,T;if(h.includes((e==null?void 0:e.splitKey)??"+")&&h.includes((e==null?void 0:e.sequenceSplitKey)??">")){console.warn(`Hotkey ${h} contains both ${(e==null?void 0:e.splitKey)??"+"} and ${(e==null?void 0:e.sequenceSplitKey)??">"} which is not supported.`);return}const p=S(h,e==null?void 0:e.splitKey,e==null?void 0:e.sequenceSplitKey,e==null?void 0:e.useKey,e==null?void 0:e.description);if(p.isSequence){m=setTimeout(()=>{y=[]},(e==null?void 0:e.sequenceTimeoutMs)??1e3);const C=p.useKey?i.key:g(i.code);if(M(C.toLowerCase()))return;y.push(C);const G=(P=p.keys)==null?void 0:P[y.length-1];if(C!==G){y=[],m&&clearTimeout(m);return}y.length===((j=p.keys)==null?void 0:j.length)&&(L.current(i,p),m&&clearTimeout(m),y=[])}else if(J(i,p,e==null?void 0:e.ignoreModifiers)||(N=p.keys)!=null&&N.includes("*")){if((T=e==null?void 0:e.ignoreEventWhen)!=null&&T.call(e,i)||R&&s.current)return;if(V(i,p,e==null?void 0:e.preventDefault),!X(i,p,e==null?void 0:e.enabled)){D(i);return}L.current(i,p),R||(s.current=!0)}})}},x=i=>{i.code!==void 0&&($(g(i.code)),((e==null?void 0:e.keydown)===void 0&&(e==null?void 0:e.keyup)!==!0||e!=null&&e.keydown)&&l(i))},O=i=>{i.code!==void 0&&(I(g(i.code)),s.current=!1,e!=null&&e.keyup&&l(i,!0))},b=a.current||(r==null?void 0:r.document)||document;return b.addEventListener("keyup",O,r==null?void 0:r.eventListenerOptions),b.addEventListener("keydown",x,r==null?void 0:r.eventListenerOptions),k&&K(v,e==null?void 0:e.delimiter).forEach(i=>k.addHotkey(S(i,e==null?void 0:e.splitKey,e==null?void 0:e.sequenceSplitKey,e==null?void 0:e.useKey,e==null?void 0:e.description))),()=>{b.removeEventListener("keyup",O,r==null?void 0:r.eventListenerOptions),b.removeEventListener("keydown",x,r==null?void 0:r.eventListenerOptions),k&&K(v,e==null?void 0:e.delimiter).forEach(i=>k.removeHotkey(S(i,e==null?void 0:e.splitKey,e==null?void 0:e.sequenceSplitKey,e==null?void 0:e.useKey,e==null?void 0:e.description))),y=[],m&&clearTimeout(m)}},[v,e,E]),a}export{se as f};
